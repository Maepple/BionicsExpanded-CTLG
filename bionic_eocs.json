[
  {
    "type": "effect_on_condition",
    "id": "EOC_BIO_dragon_breath_activated",
    "effect": { "u_message": "not implemented" }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_BIO_VDA_activated",
    "effect": { "u_message": "not implemented" }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_BIO_VDA_deactivated",
    "effect": { "u_message": "not implemented" }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_BIO_chem_factory_activated",
    "effect": [
      {
        "set_string_var": "",
        "string_input": {
          "title": "Input a request:",
          "description": "== Variable Chemical Factory Synthesis Menu ==\n-1:Tear Gas\n-2:Fungicide\n-3:Insecticide\n-4:Cancel current synthesis order\n",
          "width": 40,
          "only_digits": true
        },
        "target_var": { "context_val": "str" }
      },
      { "u_message": "inputted <context_val:str>" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_SYNTH_TEAR_GAS",
    "condition": { "or": [ { "math": [ "u_val('power') >= energy('10 kJ')" ] }, { "u_has_effect": "reserve_tear_gas" , "intensity": "10" } ] },
    "effect": {
      "if": { "u_has_effect": "reserve_tear_gas" , "intensity": "10" },
      "then": { "u_message": "Your tear gas reserves are full! Consider stopping synthesis." },
      "else": { "u_message": "You have insufficent power to produce tear gas! Consider stopping synthesis." }
    },
    "false_effect": [ 
      { "math": [ "u_val('power')", "-=", "energy('10 kJ')" ] },
      { "math": [ "u_health", "-=", "1" ] },
      { "run_eoc_with": "increment_reserves", "variables": { "reserve_id": "reserve_tear_gas" } }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_SYNTH_FUNGICIDE",
    "condition": { "or": [ { "math": [ "u_val('power') >= energy('10 kJ')" ] }, { "u_has_effect": "reserve_fungicide" , "intensity": "10" } ] },
    "effect": {
      "if": { "u_has_effect": "reserve_fungicide" , "intensity": "10" },
      "then": { "u_message": "Your fungicide reserves are full! Consider stopping synthesis." },
      "else": { "u_message": "You have insufficent power to produce fungicide! Consider stopping synthesis." }
    },
    "false_effect": [ 
      { "math": [ "u_val('power')", "-=", "energy('10 kJ')" ] },
      { "math": [ "u_health", "-=", "1" ] },
      { "run_eoc_with": "increment_reserves", "variables": { "reserve_id": "reserve_fungicide" } }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_SYNTH_INSECTICIDE",
    "condition": { "or": [ { "math": [ "u_val('power') >= energy('10 kJ')" ] }, { "u_has_effect": "reserve_insecticide" , "intensity": "10" } ] },
    "effect": {
      "if": { "u_has_effect": "reserve_insecticide" , "intensity": "10" },
      "then": { "u_message": "Your insecticide reserves are full! Consider stopping synthesis." },
      "else": { "u_message": "You have insufficent power to produce insecticide! Consider stopping synthesis." }
    },
    "false_effect": [ 
      { "math": [ "u_val('power')", "-=", "energy('10 kJ')" ] },
      { "math": [ "u_health", "-=", "1" ] },
      { "run_eoc_with": "increment_reserves", "variables": { "reserve_id": "reserve_insecticide" } }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "increment_reserves",
    "effect": [
      { "u_add_var": "index", "value": "1" },
      {
        "if": { "u_has_effect": { "context_val": "reserve_id" } },
        "then": [
          {
            "foreach": "array",
            "var": { "u_val": "index" },
            "target": [ "1", "2", "3", "4", "5", "6", "7", "8", "9", "10" ],
            "effect": {
              "if": { "u_has_effect": { "context_val": "reserve_id" }, "intensity": { "math": [ "u_index" ] } },
              "then": [ { "u_add_var": "cur_intensity", "value": "" }, { "math": [ "u_cur_intensity", "=", "u_index" ] } ]
            }
          },
          { "math": [ "u_cur_intensity", "++" ] },
          {
            "u_add_effect": { "context_val": "reserve_id" },
            "duration": "PERMANENT",
            "intensity": { "math": [ "u_cur_intensity" ] }
          }
        ],
        "else": { "u_add_effect": { "context_val": "reserve_id" }, "duration": "PERMANENT", "intensity": 1 }
      }
    ]
  }
]
